const handleBankPlayerClick = (player) => { if (selectedBankPlayer?.id === player.id) { setSelectedBankPlayer(null); // Deselect } else { setSelectedBankPlayer(player); // Select } }; const handlePositionClick = (positionIdx) => { if (!selectedBankPlayer) return; const currentPlayer = lineup[positionIdx].playerId; // If position is occupied, swap players if (currentPlayer) { const currentRole = lineup[positionIdx].role; const newLineup = [...lineup]; newLineup[positionIdx] = { playerId: selectedBankPlayer.id, role: currentRole, originalPlayerId: selectedBankPlayer.id }; setLineup(newLineup); setSelectedBankPlayer(null); } else { // If position is empty, assign with auto-role let autoRole = null; if (positionIdx === 0) autoRole = 'Diagonaal'; // Pos 4 else if (positionIdx === 1) autoRole = 'Midden'; // Pos 3 else if (positionIdx === 2) autoRole = 'Passer/Loper'; // Pos 2 else if (positionIdx === 3) autoRole = 'Passer/Loper'; // Pos 5 else if (positionIdx === 4) autoRole = 'Midden'; // Pos 6 else if (positionIdx === 5) autoRole = 'Spelverdeler'; // Pos 1 const newLineup = [...lineup]; newLineup[positionIdx] = { playerId: selectedBankPlayer.id, role: autoRole, originalPlayerId: selectedBankPlayer.id }; setLineup(newLineup); setSelectedBankPlayer(null); } };import React, { useState } from 'react'; import { RotateCcw, Users, TrendingUp, Plus, Trash2, Copy, RefreshCw } from 'lucide-react'; export default function VolleyballTracker() { const [currentSet, setCurrentSet] = useState(1); const [sets, setSets] = useState([{ set: 1, us: 0, them: 0, timeouts: [], lastScorer: null, startLineup: null }]); const [serviceHits, setServiceHits] = useState([]); const [ourPointHits, setOurPointHits] = useState([]); const [lineup, setLineup] = useState(Array(6).fill({ playerId: null, role: null, originalPlayerId: null })); const [allPlayers, setAllPlayers] = useState([]); const [playerStats, setPlayerStats] = useState({}); const [activeTab, setActiveTab] = useState('players'); const [newPlayerName, setNewPlayerName] = useState(''); const [newPlayerNumber, setNewPlayerNumber] = useState(''); const [showLineupModal, setShowLineupModal] = useState(false); const [pendingLineup, setPendingLineup] = useState(null); const [liberoPlayer, setLiberoPlayer] = useState(null); const [showFireworks, setShowFireworks] = useState(false); const [setWinner, setSetWinner] = useState(null); const [overlaySet, setOverlaySet] = useState(null); const [draggedPlayer, setDraggedPlayer] = useState(null); const [selectedBankPlayer, setSelectedBankPlayer] = useState(null); const roles = ['Passer/Loper', 'Midden', 'Spelverdeler', 'Diagonaal']; const courtPositions = [ { id: 0, x: 15, y: 35, label: 'Pos 4' }, { id: 1, x: 50, y: 35, label: 'Pos 3' }, { id: 2, x: 85, y: 35, label: 'Pos 2' }, { id: 3, x: 15, y: 65, label: 'Pos 5' }, { id: 4, x: 50, y: 65, label: 'Pos 6' }, { id: 5, x: 85, y: 65, label: 'Pos 1' } ]; const addPlayer = () => { if (newPlayerName.trim() && newPlayerNumber.trim()) { const newPlayer = { id: Date.now(), name: newPlayerName.trim(), number: newPlayerNumber.trim() }; setAllPlayers([...allPlayers, newPlayer]); setPlayerStats({...playerStats, [newPlayer.id]: 0}); setNewPlayerName(''); setNewPlayerNumber(''); } }; const removePlayer = (playerId) => { setAllPlayers(allPlayers.filter(p => p.id !== playerId)); const newStats = {...playerStats}; delete newStats[playerId]; setPlayerStats(newStats); setLineup(lineup.map(p => p.playerId === playerId ? { playerId: null, role: null, originalPlayerId: null } : p)); if (liberoPlayer === playerId) setLiberoPlayer(null); }; const assignToPosition = (idx, playerId, role) => { // If no role provided, auto-assign based on position if (!role && playerId) { if (idx === 0) role = 'Diagonaal'; // Pos 4 else if (idx === 1) role = 'Midden'; // Pos 3 else if (idx === 2) role = 'Passer/Loper'; // Pos 2 else if (idx === 3) role = 'Passer/Loper'; // Pos 5 else if (idx === 4) role = 'Midden'; // Pos 6 else if (idx === 5) role = 'Spelverdeler'; // Pos 1 } const newLineup = [...lineup]; newLineup[idx] = { playerId, role, originalPlayerId: playerId }; setLineup(newLineup); }; const handleDragStart = (e, player) => { e.dataTransfer.setData('playerId', player.id.toString()); e.dataTransfer.effectAllowed = 'move'; setDraggedPlayer(player); }; const handleDragEnd = (e) => { setDraggedPlayer(null); }; const handleDragOver = (e) => { e.preventDefault(); e.stopPropagation(); }; const handleDrop = (e, positionIdx) => { e.preventDefault(); e.stopPropagation(); const playerId = e.dataTransfer.getData('playerId'); if (!playerId) return; const player = allPlayers.find(p => p.id === parseInt(playerId)); if (!player) return; // Auto-assign role based on position let autoRole = null; if (positionIdx === 0) autoRole = 'Diagonaal'; // Pos 4 else if (positionIdx === 1) autoRole = 'Midden'; // Pos 3 else if (positionIdx === 2) autoRole = 'Passer/Loper'; // Pos 2 else if (positionIdx === 3) autoRole = 'Passer/Loper'; // Pos 5 else if (positionIdx === 4) autoRole = 'Midden'; // Pos 6 else if (positionIdx === 5) autoRole = 'Spelverdeler'; // Pos 1 const newLineup = [...lineup]; newLineup[positionIdx] = { playerId: player.id, role: autoRole, originalPlayerId: player.id }; setLineup(newLineup); setDraggedPlayer(null); }; const handleSwapPlayer = (positionIdx, newPlayerId) => { const currentRole = lineup[positionIdx].role; assignToPosition(positionIdx, newPlayerId, currentRole); }; const handleRemoveFromPosition = (positionIdx) => { const newLineup = [...lineup]; newLineup[positionIdx] = { playerId: null, role: null, originalPlayerId: null }; setLineup(newLineup); }; const rotateLineup = () => { const newLineup = [...lineup]; const temp = newLineup[5]; [newLineup[5], newLineup[2], newLineup[1], newLineup[0], newLineup[3], newLineup[4]] = [newLineup[2], newLineup[1], newLineup[0], newLineup[3], newLineup[4], temp]; if (newLineup[4].role === 'Midden' && liberoPlayer) { newLineup[4] = { playerId: liberoPlayer, role: 'Libero', originalPlayerId: newLineup[4].playerId }; } if (newLineup[0].role === 'Libero' && newLineup[0].originalPlayerId) { newLineup[0] = { playerId: newLineup[0].originalPlayerId, role: 'Midden', originalPlayerId: null }; } setLineup(newLineup); }; const handleCourtClick = (e, isOurCourt) => { if (activeTab !== 'game') return; const currentSetData = sets.find(s => s.set === currentSet); const winPoints = currentSet === 5 ? 15 : 25; const isSetWon = (currentSetData.us >= winPoints && currentSetData.us - currentSetData.them >= 2) || (currentSetData.them >= winPoints && currentSetData.them - currentSetData.us >= 2); if (isSetWon) return; const rect = e.currentTarget.getBoundingClientRect(); const x = ((e.clientX - rect.left) / rect.width) * 100; const y = ((e.clientY - rect.top) / rect.height) * 100; if (isOurCourt && y < 96) { setOurPointHits([...ourPointHits, { x, y, set: currentSet }]); updateScore('us', 1); } else if (!isOurCourt && y > 4) { setServiceHits([...serviceHits, { x, y, set: currentSet }]); updateScore('them', 1); } }; const updateScore = (team, delta) => { const currentSetData = sets.find(s => s.set === currentSet); // Determine win condition based on set number const isSet5 = currentSet === 5; const winPoints = isSet5 ? 15 : 25; // Check if set is already won const isSetWon = (currentSetData.us >= winPoints && currentSetData.us - currentSetData.them >= 2) || (currentSetData.them >= winPoints && currentSetData.them - currentSetData.us >= 2); if (isSetWon) return; const shouldRotate = team === 'us' && currentSetData.lastScorer === 'them'; const newUs = team === 'us' ? currentSetData.us + delta : currentSetData.us; const newThem = team === 'them' ? currentSetData.them + delta : currentSetData.them; setSets(sets.map(s => s.set === currentSet ? {...s, us: Math.max(0, newUs), them: Math.max(0, newThem), lastScorer: team} : s)); if (newUs >= winPoints && newUs - newThem >= 2) { setSetWinner('us'); setShowFireworks(true); setTimeout(() => { setShowFireworks(false); setSetWinner(null); }, 4000); } else if (newThem >= winPoints && newThem - newUs >= 2) { setSetWinner('them'); setTimeout(() => setSetWinner(null), 3000); } if (shouldRotate && delta > 0) setTimeout(() => rotateLineup(), 100); }; const addTimeout = () => { const currentSetData = sets.find(s => s.set === currentSet); const currentScore = ${currentSetData.us}-${currentSetData.them}; setSets(sets.map(s => s.set === currentSet && s.timeouts.length < 2 ? {...s, timeouts: [...s.timeouts, currentScore]} : s)); }; const nextSet = () => { const currentLineup = lineup.filter(p => p.playerId !== null); const newStats = {...playerStats}; currentLineup.forEach(pos => { if (pos.playerId) newStats[pos.playerId] = (newStats[pos.playerId] || 0) + 1; }); setPlayerStats(newStats); // Calculate sets won const setsWonByUs = sets.filter(s => { const winPoints = s.set === 5 ? 15 : 25; return s.us >= winPoints && s.us - s.them >= 2; }).length; const setsWonByThem = sets.filter(s => { const winPoints = s.set === 5 ? 15 : 25; return s.them >= winPoints && s.them - s.us >= 2; }).length; // Check if match is over (first to 3 sets, or 4-0 possible) if (setsWonByUs === 3 || setsWonByThem === 3) { alert(setsWonByUs === 3 ? 'ğŸ‰ WEDSTRIJD GEWONNEN! ğŸ‰\n\nJullie hebben gewonnen met ' + setsWonByUs + '-' + setsWonByThem : 'Wedstrijd verloren ğŸ˜”\n\nEindstand: ' + setsWonByUs + '-' + setsWonByThem ); return; } // Can't have more than 5 sets (unless one team won 4-0) if (currentSet >= 5 || setsWonByUs === 4 || setsWonByThem === 4) { alert('Wedstrijd afgelopen!\n\nEindstand: ' + setsWonByUs + '-' + setsWonByThem); return; } const newSetNum = currentSet + 1; setCurrentSet(newSetNum); const currentSetData = sets.find(s => s.set === currentSet); const startLineupToSave = currentSetData.startLineup || lineup; setSets(sets.map(s => s.set === currentSet ? {...s, startLineup: startLineupToSave} : s).concat([{ set: newSetNum, us: 0, them: 0, timeouts: [], lastScorer: null, startLineup: null }])); setPendingLineup(startLineupToSave); setShowLineupModal(true); }; const confirmLineup = (keepLineup) => { const newLineup = keepLineup ? pendingLineup : Array(6).fill({ playerId: null, role: null, originalPlayerId: null }); setLineup(newLineup); setSets(sets.map(s => s.set === currentSet ? {...s, startLineup: newLineup} : s)); setShowLineupModal(false); setPendingLineup(null); setActiveTab('lineup'); }; const resetAll = () => { if (confirm('Weet je zeker dat je alles wilt resetten?')) { setCurrentSet(1); setSets([{ set: 1, us: 0, them: 0, timeouts: [], lastScorer: null, startLineup: null }]); setServiceHits([]); setOurPointHits([]); setLineup(Array(6).fill({ playerId: null, role: null, originalPlayerId: null })); setLiberoPlayer(null); const resetStats = {}; allPlayers.forEach(p => resetStats[p.id] = 0); setPlayerStats(resetStats); } }; const getHeatmapIntensity = (x, y, hits) => { if (hits.length === 0) return 0; const nearby = hits.filter(hit => Math.sqrt(Math.pow(hit.x - x, 2) + Math.pow(hit.y - y, 2)) < 15); return Math.min(nearby.length / 3, 1); }; const CourtField = ({ title, isOurCourt, hits }) => { const currentSetHits = hits.filter(h => h.set === currentSet); const overlayHits = overlaySet ? hits.filter(h => h.set === overlaySet) : []; const color = isOurCourt ? '#3B82F6' : '#EF4444'; const overlayColor = isOurCourt ? '#10B981' : '#F59E0B'; return ( <div className="bg-white rounded-xl shadow-lg p-1.5"> <h2 className="text-xs font-bold text-gray-700 mb-1 text-center">{title}</h2> <div className="relative bg-blue-700 rounded-lg cursor-crosshair overflow-hidden" style={{ width: '100%', paddingBottom: '122%' }} onClick={(e) => handleCourtClick(e, isOurCourt)}> <div className="absolute inset-0"> <div className="absolute bg-orange-400" style={isOurCourt ? { inset: '2% 2% auto 2%', height: '96%' } : { inset: 'auto 2% 2% 2%', height: '96%' }} /> <div className="absolute border-4 border-white" style={isOurCourt ? { top: '2%', left: '2%', right: '2%', height: '96%', borderBottom: 'none' } : { bottom: '2%', left: '2%', right: '2%', height: '96%', borderTop: 'none' }} /> <div className="absolute left-0 right-0 h-1 bg-white z-10" style={isOurCourt ? { bottom: '4%' } : { top: '4%' }} /> <div className="absolute left-0 right-0 flex justify-center z-10" style={isOurCourt ? { bottom: '4%', transform: 'translateY(50%)' } : { top: '4%', transform: 'translateY(-50%)' }}> <div className="w-full h-16 border-l-2 border-r-2 border-white opacity-60" style={{ background: 'repeating-linear-gradient(0deg, transparent, transparent 4px, white 4px, white 5px)' }} /> </div> <div className="absolute left-0 right-0 h-0.5 bg-white" style={isOurCourt ? { bottom: '28%', marginLeft: '2%', marginRight: '2%' } : { top: '28%', marginLeft: '2%', marginRight: '2%' }} /> {/* Overlay Heatmap (if selected) */} {overlaySet && ( <div className="absolute inset-0 grid grid-cols-10 grid-rows-10 pointer-events-none"> {Array.from({length: 100}).map((_, i) => { const x = (i % 10) * 10 + 5; const y = Math.floor(i / 10) * 10 + 5; const intensity = getHeatmapIntensity(x, y, overlayHits); return (isOurCourt ? y < 96 : y > 4) && intensity > 0 ? ( <div key={i} className="rounded-full opacity-40" style={{ backgroundColor: rgba(${isOurCourt ? '16, 185, 129' : '245, 158, 11'}, ${intensity * 0.6}), gridColumn: (i % 10) + 1, gridRow: Math.floor(i / 10) + 1 }} /> ) : null; })} </div> )} {/* Current Set Heatmap */} <div className="absolute inset-0 grid grid-cols-10 grid-rows-10 pointer-events-none"> {Array.from({length: 100}).map((_, i) => { const x = (i % 10) * 10 + 5; const y = Math.floor(i / 10) * 10 + 5; const intensity = getHeatmapIntensity(x, y, currentSetHits); return (isOurCourt ? y < 96 : y > 4) && intensity > 0 ? ( <div key={i} className="rounded-full" style={{ backgroundColor: rgba(${isOurCourt ? '59, 130, 246' : '239, 68, 68'}, ${intensity * 0.6}), gridColumn: (i % 10) + 1, gridRow: Math.floor(i / 10) + 1 }} /> ) : null; })} </div> {/* Overlay hits (if selected) */} {overlaySet && overlayHits.map((hit, i) => ( <div key={overlay-${i}} className="absolute transform -translate-x-1/2 -translate-y-1/2 z-15 opacity-50" style={{ left: ${hit.x}%, top: ${hit.y}% }}> <svg viewBox="0 0 24 24" className="w-4 h-4 drop-shadow-lg"> <circle cx="12" cy="12" r="10" fill={overlayColor} stroke="#000" strokeWidth="1.5"/> <path d="M 2 12 Q 12 8 22 12 M 2 12 Q 12 16 22 12 M 12 2 Q 8 12 12 22 M 12 2 Q 16 12 12 22" fill="none" stroke="#000" strokeWidth="1"/> </svg> </div> ))} {/* Current set hits */} {currentSetHits.map((hit, i) => ( <div key={i} className="absolute transform -translate-x-1/2 -translate-y-1/2 z-20" style={{ left: ${hit.x}%, top: ${hit.y}% }}> <svg viewBox="0 0 24 24" className="w-4 h-4 drop-shadow-lg"> <circle cx="12" cy="12" r="10" fill={color} stroke="#000" strokeWidth="1.5"/> <path d="M 2 12 Q 12 8 22 12 M 2 12 Q 12 16 22 12 M 12 2 Q 8 12 12 22 M 12 2 Q 16 12 12 22" fill="none" stroke="#000" strokeWidth="1"/> </svg> </div> ))} {!isOurCourt && courtPositions.map((pos, idx) => { const playerId = lineup[idx].playerId; const player = allPlayers.find(p => p.id === playerId); const role = lineup[idx].role; const adjustedY = 15 + ((pos.y - 20) * 1.3); return ( <div key={pos.id} className="absolute transform -translate-x-1/2 -translate-y-1/2 z-30" style={{ left: ${pos.x}%, top: ${adjustedY}% }}> <div className="relative"> <div className="relative w-9 h-9 flex items-center justify-center"> <svg viewBox="0 0 100 100" className="w-full h-full drop-shadow-lg"> <path d="M 20 30 L 20 90 L 80 90 L 80 30 L 70 25 L 65 35 L 35 35 L 30 25 Z M 35 35 Q 50 40 65 35 M 20 30 L 10 40 L 15 50 L 20 45 M 80 30 L 90 40 L 85 50 L 80 45" fill={player ? (role === 'Libero' ? '#1E40AF' : '#DC2626') : '#D1D5DB'} stroke="#000" strokeWidth="2"/> </svg> <div className="absolute inset-0 flex items-center justify-center"> <span className="text-sm font-bold text-black" style={{ textShadow: '1px 1px 0 #fff, -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff', marginTop: '3px' }}> {player ? player.number : '?'} </span> </div> </div> <div className="absolute top-full mt-0.5 w-12 text-center"> <div className="text-xs font-semibold text-gray-700 bg-white rounded px-0.5 py-0.5 shadow-sm leading-tight" style={{ fontSize: '10px' }}> {player ? player.name.substring(0, 4) : '?'} </div> </div> </div> </div> ); })} </div> </div> </div> ); }; const currentSetData = sets.find(s => s.set === currentSet); return ( <div className="h-screen bg-gradient-to-br from-orange-50 to-orange-100 p-2 flex flex-col overflow-hidden"> <div className="max-w-7xl mx-auto w-full flex flex-col h-full"> {showFireworks && ( <div className="fixed inset-0 z-50 pointer-events-none"> <div className="absolute inset-0 flex items-center justify-center"> <div className="text-4xl sm:text-6xl font-bold text-yellow-400 animate-bounce" style={{ textShadow: '0 0 20px rgba(255,215,0,0.8)' }}> ğŸ‰ SET GEWONNEN! ğŸ‰ </div> </div> {[...Array(20)].map((_, i) => ( <div key={i} className="absolute animate-ping" style={{ left: ${Math.random() * 100}%, top: ${Math.random() * 100}%, animationDelay: ${Math.random() * 2}s }}> <div className="text-2xl">{['ğŸ†', 'ğŸ‡', 'âœ¨'][Math.floor(Math.random() * 3)]}</div> </div> ))} </div> )} {setWinner === 'them' && ( <div className="fixed top-16 left-1/2 transform -translate-x-1/2 z-50 bg-red-500 text-white px-4 py-2 rounded-xl shadow-2xl text-lg font-bold animate-bounce"> Set verloren ğŸ˜” </div> )} {showLineupModal && ( <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"> <div className="bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl"> <h2 className="text-2xl font-bold text-gray-800 mb-4">Opstelling Set {currentSet}</h2> <p className="text-gray-600 mb-6">Zelfde opstelling of nieuwe maken?</p> <div className="flex gap-3"> <button onClick={() => confirmLineup(true)} className="flex-1 bg-green-500 text-white py-3 rounded-xl font-semibold hover:bg-green-600 transition flex items-center justify-center gap-2"> <Copy size={20} /> Behouden </button> <button onClick={() => confirmLineup(false)} className="flex-1 bg-orange-500 text-white py-3 rounded-xl font-semibold hover:bg-orange-600 transition flex items-center justify-center gap-2"> <RefreshCw size={20} /> Nieuw </button> </div> </div> </div> )} <div className="bg-white rounded-xl shadow-lg p-2 mb-2"> <div className="flex justify-between items-center mb-2"> <h1 className="text-lg sm:text-2xl font-bold text-orange-600">ğŸ Volleybal</h1> <button onClick={resetAll} className="p-1.5 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition"> <RotateCcw size={16} /> </button> </div> <div className="flex gap-1 mb-2"> {['players', 'lineup', 'game', 'stats'].map(tab => ( <button key={tab} onClick={() => setActiveTab(tab)} className={flex-1 py-1.5 px-2 rounded-lg text-xs font-semibold transition ${activeTab === tab ? 'bg-orange-500 text-white' : 'bg-gray-100 text-gray-600'}}> {tab === 'players' && <Users size={14} className="inline mr-1" />} {tab === 'stats' && <TrendingUp size={14} className="inline mr-1" />} {tab.charAt(0).toUpperCase() + tab.slice(1)} </button> ))} </div> {activeTab === 'players' && ( <div> <h2 className="text-sm font-semibold text-gray-700 mb-2">Alle spelers</h2> <div className="bg-gray-50 p-2 rounded-lg mb-2"> <div className="flex gap-1"> <input type="text" value={newPlayerName} onChange={(e) => setNewPlayerName(e.target.value)} placeholder="Naam" className="flex-1 p-1.5 text-sm border-2 border-gray-300 rounded-lg" onKeyPress={(e) => e.key === 'Enter' && addPlayer()} /> <input type="text" value={newPlayerNumber} onChange={(e) => setNewPlayerNumber(e.target.value)} placeholder="Nr" className="w-14 p-1.5 text-sm border-2 border-gray-300 rounded-lg text-center" maxLength={3} onKeyPress={(e) => e.key === 'Enter' && addPlayer()} /> <button onClick={addPlayer} className="bg-green-500 text-white p-1.5 rounded-lg hover:bg-green-600 transition"><Plus size={18} /></button> </div> </div> <div className="space-y-1 max-h-60 overflow-y-auto"> {allPlayers.length === 0 ? ( <div className="text-center py-4 text-gray-400 text-sm">Voeg spelers toe</div> ) : ( allPlayers.map(player => ( <div key={player.id} className="bg-white border border-gray-200 p-2 rounded-lg flex items-center justify-between"> <div className="flex items-center gap-2"> <div className="w-8 h-8 bg-red-600 rounded flex items-center justify-center text-white font-bold text-sm">{player.number}</div> <span className="font-semibold text-gray-700 text-sm">{player.name}</span> </div> <button onClick={() => removePlayer(player.id)} className="text-red-500 hover:bg-red-50 p-1 rounded-lg transition"><Trash2 size={16} /></button> </div> )) )} </div> </div> )} {activeTab === 'lineup' && ( <div className="flex flex-col h-full overflow-hidden"> <h2 className="text-sm font-semibold text-gray-700 mb-2">Opstelling Set {currentSet}</h2> {allPlayers.length === 0 ? ( <div className="text-center py-4 text-gray-400 text-sm">Voeg eerst spelers toe</div> ) : ( <> <div className="bg-blue-50 border-2 border-blue-300 rounded-lg p-2 mb-2"> <div className="font-semibold text-blue-700 text-xs mb-1">Libero</div> <select value={liberoPlayer || ''} onChange={(e) => setLiberoPlayer(e.target.value ? parseInt(e.target.value) : null)} className="w-full p-1.5 text-sm border-2 border-blue-300 rounded-lg font-semibold"> <option value="">-- Geen Libero --</option> {allPlayers.map(player => <option key={player.id} value={player.id}>#{player.number} - {player.name}</option>)} </select> </div> <div className="space-y-1.5 max-h-64 overflow-y-auto"> {courtPositions.map((pos, idx) => { const availablePlayers = allPlayers.filter(player => { if (player.id === liberoPlayer) return false; if (player.id === lineup[idx].playerId) return true; return !lineup.some((assigned, posIdx) => posIdx !== idx && assigned.playerId === player.id); }); return ( <div key={pos.id} className="bg-gray-50 p-1.5 rounded-lg"> <div className="font-semibold text-gray-600 text-xs mb-1">{pos.label}</div> <div className="grid grid-cols-2 gap-1"> <select value={lineup[idx].playerId || ''} onChange={(e) => assignToPosition(idx, e.target.value ? parseInt(e.target.value) : null, lineup[idx].role)} className="p-1.5 text-xs border-2 border-gray-300 rounded-lg font-semibold"> <option value="">-- Speler --</option> {availablePlayers.map(player => <option key={player.id} value={player.id}>#{player.number} {player.name}</option>)} </select> <select value={lineup[idx].role || ''} onChange={(e) => assignToPosition(idx, lineup[idx].playerId, e.target.value || null)} className="p-1.5 text-xs border-2 border-gray-300 rounded-lg font-semibold"> <option value="">-- Rol --</option> {roles.map(role => <option key={role} value={role}>{role}</option>)} </select> </div> </div> ); })} </div> </> )} </div> )} {activeTab === 'game' && ( <> <div className="grid grid-cols-3 gap-2 mb-2"> <button onClick={() => updateScore('us', 1)} disabled={(currentSetData.us >= (currentSet === 5 ? 15 : 25) && currentSetData.us - currentSetData.them >= 2) || (currentSetData.them >= (currentSet === 5 ? 15 : 25) && currentSetData.them - currentSetData.us >= 2)} className="bg-blue-50 hover:bg-blue-100 active:bg-blue-200 p-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"> <div className="text-4xl font-bold text-blue-600 text-center">{currentSetData.us}</div> <div className="text-xs text-gray-600 text-center">Wij</div> </button> <div className="bg-orange-50 p-2 rounded-lg text-center"> <div className="text-xl font-bold text-orange-600">Set {currentSet}</div> <div className="text-xs text-gray-500 mb-1"> {currentSet === 5 ? (currentSetData.us >= 13 || currentSetData.them >= 13 ? 'Â±2pt' : 'â†’15') : (currentSetData.us >= 24 || currentSetData.them >= 24 ? 'Â±2pt' : 'â†’25') } </div> <div className="flex gap-1 justify-center flex-wrap"> {sets.map(s => { const isOverlayActive = overlaySet === s.set; const isCurrent = s.set === currentSet; return ( <button key={s.set} onClick={() => setOverlaySet(isOverlayActive ? null : s.set)} disabled={isCurrent} className={px-1.5 py-0.5 rounded text-xs transition ${ isCurrent ? 'bg-orange-600 text-white cursor-default' : isOverlayActive ? 'bg-green-500 text-white ring-2 ring-green-300' : 'bg-white text-gray-600 hover:bg-gray-100' }} > {s.set}:{s.us}-{s.them} </button> ); })} </div> </div> <button onClick={() => updateScore('them', 1)} disabled={(currentSetData.us >= (currentSet === 5 ? 15 : 25) && currentSetData.us - currentSetData.them >= 2) || (currentSetData.them >= (currentSet === 5 ? 15 : 25) && currentSetData.them - currentSetData.us >= 2)} className="bg-red-50 hover:bg-red-100 active:bg-red-200 p-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"> <div className="text-4xl font-bold text-red-600 text-center">{currentSetData.them}</div> <div className="text-xs text-gray-600 text-center">Zij</div> </button> </div> <div className="bg-yellow-50 border border-yellow-300 rounded-lg p-2 mb-2"> <div className="flex items-center justify-between"> <button onClick={addTimeout} disabled={currentSetData.timeouts.length >= 2} className="bg-yellow-500 text-white px-4 py-1.5 rounded text-xs font-semibold hover:bg-yellow-600 transition disabled:opacity-50">â±ï¸ Timeout</button> <div className="flex gap-3 text-xs font-semibold"> <div className={currentSetData.timeouts[0] ? 'text-yellow-700' : 'text-gray-400'}>TO1: {currentSetData.timeouts[0] || '---'}</div> <div className={currentSetData.timeouts[1] ? 'text-yellow-700' : 'text-gray-400'}>TO2: {currentSetData.timeouts[1] || '---'}</div> </div> </div> </div> {currentSetData.lastScorer && ( <div className="bg-blue-50 border border-blue-300 rounded-lg p-1.5 mb-2 text-center text-xs"> {currentSetData.lastScorer === 'us' ? 'ğŸ”µ Wij service' : 'ğŸ”´ Zij service'} {currentSetData.lastScorer === 'them' && ' - Bij punt: doordraaien'} </div> )} <button onClick={nextSet} className="w-full bg-green-500 text-white py-2 rounded-lg text-sm font-semibold hover:bg-green-600 transition mb-2">Volgende Set â†’</button> </> )} {activeTab === 'stats' && ( <div> <h2 className="text-sm font-semibold text-gray-700 mb-2">Speeltijd per speler</h2> {allPlayers.length === 0 ? ( <div className="text-center py-4 text-gray-400 text-sm">Voeg spelers toe</div> ) : ( <div className="space-y-1.5 max-h-72 overflow-y-auto"> {allPlayers.sort((a, b) => (playerStats[b.id] || 0) - (playerStats[a.id] || 0)).map(player => { const setsPlayed = playerStats[player.id] || 0; const maxSets = Math.max(...Object.values(playerStats)); return ( <div key={player.id} className="bg-gray-50 p-2 rounded-lg"> <div className="flex justify-between items-center mb-1"> <div className="flex items-center gap-2"> <div className="w-7 h-7 bg-red-600 rounded flex items-center justify-center text-white font-bold text-xs">{player.number}</div> <span className="font-semibold text-gray-700 text-sm">{player.name}</span> </div> <span className="text-xl font-bold text-orange-600">{setsPlayed}</span> </div> <div className="w-full bg-gray-200 rounded-full h-1.5"> <div className="bg-orange-500 h-1.5 rounded-full transition-all" style={{ width: ${maxSets > 0 ? Math.max(5, (setsPlayed / maxSets) * 100) : 5}% }} /> </div> </div> ); })} </div> )} </div> )} </div> {activeTab === 'game' && ( <> <div className="grid grid-cols-2 gap-2 mb-1"> <CourtField title="Hun Services" isOurCourt={false} hits={serviceHits} /> <CourtField title="Onze Punten" isOurCourt={true} hits={ourPointHits} /> </div> {overlaySet && ( <div className="bg-green-50 border-2 border-green-300 rounded-lg p-2 text-xs text-center"> <strong>Overlay actief:</strong> Set {overlaySet} heatmap (groen/oranje) over huidige set. Klik nogmaals om uit te zetten. </div> )} </> )} </div> </div> ); }
